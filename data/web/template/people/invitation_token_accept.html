{% extends "layout.html" %}

{% block content %}

<p>
    The details of this invitation are shown below.
    Please do not accept if the invitation appears
    not to refer to you.
    {% if session.person is defined %}
        Since you have already registered,
        your existing profile will be retained,
        so do not worry if these details are not entirely correct.
    {% else %}
        These details will be the basis for your new profile,
        but you will be able to edit everything after accepting
        the invitation.
    {% endif %}
</p>

<table>
    <tr>
        <th>Invitation code</th>
        <td><tt>{{ token }}</tt></td>
    </tr>
    <tr>
        <th>Name</th>
        <td>{{ person.name }}</td>
    {% if person.email is not none %}
        {% for email in person.email %}
            <tr>
                <th>Email</th>
                <td>{{ email.address }}</td>
            </tr>
        {% endfor %}
    {% endif %}
    {% if person.institution is not none %}
        <tr>
            <th>Institution</th>
            <td>{{ person.institution.name }}</td>
        </tr>
    {% endif %}
</table>

<form method="POST" action="{{ url_for('.invitation_token_accept') }}">
    <p>
        <input type="hidden" name="token" value="{{ token }}" />
        <input type="submit" value="Accept invitation" name="submit-accept" />
    </p>
</form>

{% endblock %}

