{% extends "layout.html" %}

{% from 'macro/institution.html' import render_institution_summary %}

{% block content %}

{% if person.user_id is none %}
    <p>
        This profile does not belong to a registered user.
    </p>
{% else %}
    {% if is_current_user %}
        <p>
            This is your profile.
        </p>
        <p>
            <a href="{{ url_for('.change_password') }}">Change password</a>
            <br />
            <a href="{{ url_for('.change_user_name') }}">Change user name</a>
        </p>
    {% endif %}
{% endif %}
{% if can_edit %}
    <p>
        <a href="{{ url_for('.person_edit', person_id=person.id) }}">Edit profile</a>
        <br />
        <a href="{{ url_for('.person_edit_email', person_id=person.id) }}">Edit email addresses</a>
        <br />
        <a href="{{ url_for('.person_edit_institution', person_id=person.id) }}">Change institution</a>
    </p>
{% endif %}

<p>
    Full name: {{ person.name }}
    {% if is_current_user %}
        <br />
        User directory: {{ 'shown' if person.public else 'not shown' }} in directory
    {% endif %}
    {% if person.institution is not none %}
        <br />
        Institution: <a href="{{ url_for('.institution_view', institution_id=person.institution.id) }}">{{ render_institution_summary(person.institution) }}</a>
    {% endif %}
    {% if person.email is not none %}
        {% for email in person.email %}
            <br />
            Email:
            <a href="mailto:{{ email.address }}">{{ email.address }}</a>
            {{ 'primary' if email.primary }}
            {{ 'verified' if email.verified }}
            {{ 'public' if email.public }}
        {% endfor %}
    {% endif %}
</p>

{% endblock %}
