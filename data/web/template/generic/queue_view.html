{% extends "layout.html" %}
{% set navigation=['facility_admin', ('Queues', url_for('.queue_list'))] %}
{% set help_link=url_for('help.admin_page', page_name='queue') %}

{% block content %}

<table>
    <tr>
        <th>Code</th>
        <td>{{ queue.code }}</td>
    </tr>
</table>

{{ queue.description | format_text(queue.description_format) }}

<p>
    <a href="{{ url_for('.queue_edit', queue_id=queue.id) }}">Edit queue</a>
</p>

<h2>Affiliations</h2>

{% if affiliations %}
    <table>
        <tr>
            <th>Name</th>
            <th>Assignment weight</th>
        </tr>
        {% for affiliation in affiliations %}
            <tr>
                <td>{{ affiliation.name }}</td>
                <td>
                    {{ affiliation.weight if affiliation.weight }}
                    {% if affiliation.exclude %}<span class="label">exclude</span>{% endif %}
                    {% if not (affiliation.weight or affiliation.exclude) %}&nbsp;{% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    <p class="missing">
        No affiliations are available for this queue.
    </p>
{% endif %}

<p>
    <a id="affiliation_edit_link" href="{{ url_for('.affiliation_edit', queue_id=queue.id) }}">Edit affiliations</a>
</p>

<h2>Groups</h2>

<ul>
    {% for (group_type, group_name) in groups.items() %}
        <li>
            <a href="{{ url_for('.group_view', queue_id=queue.id, group_type=group_type) }}">{{ group_name }}</a>
        </li>
    {% endfor %}
</ul>

{% endblock %}
