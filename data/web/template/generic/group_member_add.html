{% extends 'layout.html' %}
{% set navigation=['facility_admin', ('Queues', url_for('.queue_list')), (queue.name, url_for('.queue_view', queue_id=queue.id)), (group_info.name, url_for('.group_view', queue_id=queue.id, group_type=group_type))] %}

{% block content %}
<p class="section_label">
    Either
</p>

<section>
    <h2>Add a Member from the Directory</h2>

    {% if message_link is not none %}
        <p class="warning">
            {{ message_link }}
        </p>
    {% endif %}

    <form method="POST" action="{{ url_for('.group_member_add', queue_id=queue.id, group_type=group_type) }}">
        <ol>
            <li>
                <label for="person_id">Member</label>
                <select name="person_id">
                    {% for person in persons %}
                        <option value="{{ person.id }}" {{ 'selected="selected"' | safe if member.person_id == person.id }}>
                            {{ person.name | truncate(40, killwords=True, end='\u2026') }}{% if person.institution_id is not none %},
                                {{ person.institution_name | truncate(35, killwords=True, end='\u2026') }}{% if person.institution_country is not none %},
                                    {{ person.institution_country | truncate(15, killwords=True, end='\u2026')}}
                                {% endif %}
                            {% endif %}
                        </option>
                    {% endfor %}
                </select>
            </li>
            <li>
                <input type="submit" value="Add to group" name="submit_link" />
            </li>
        </ol>
    </form>
</section>

<p class="section_label">
    Or
</p>

<section>
    <h2>Invite a Member to Register</h2>

    {% if message_invite is not none %}
        <p class="warning">
            {{ message_invite }}
        </p>
    {% endif %}

    <form method="POST" action="{{ url_for('.group_member_add', queue_id=queue.id, group_type=group_type) }}">
        <ol>
            <li>
                <label for="name">Full name</label>
                <input type="text" name="name" value="{{ member.name }}" required="required" autofocus="autofocus" size="40" />
            </li>
            <li>
                <label for="email">Email address</label>
                <input type="email" name="email" value="{{ member.email }}" required="required" size="40" />
            </li>
            <li>
                <input type="submit" value="Invite to register" name="submit_invite" />
            </li>
        </ol>
    </form>
</section>
{% endblock %}
